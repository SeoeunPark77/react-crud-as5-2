{"ast":null,"code":"var _jsxFileName = \"/Users/kim-yujin/Downloads/2024_OSSWorkspace/as5-2/src/components/UpdateDataForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UpdateDataForm({\n  item,\n  onUpdateData,\n  onClose\n}) {\n  _s();\n  const [updatedData, setUpdatedData] = useState({\n    name: item.name,\n    email: item.email,\n    phone: item.phone\n  });\n  const [editCount, setEditCount] = useState(0); // 수정 횟수\n\n  const nameRef = useRef();\n  const emailRef = useRef();\n  const phoneRef = useRef();\n\n  // 값이 변경될 때 상태 업데이트 및 API 호출\n  const handleChange = async e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUpdatedData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    setEditCount(prev => prev + 1); // 수정 횟수 증가\n\n    try {\n      const response = await fetch(`https://6728fadd6d5fa4901b6bbadc.mockapi.io/users/${item.id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          ...updatedData,\n          [name]: value\n        })\n      });\n      if (!response.ok) {\n        console.error(\"Error updating data\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n\n  // 유효성 검사 함수\n  const validateInputs = () => {\n    if (!nameRef.current.value.trim()) {\n      alert(\"이름을 입력해주세요!\");\n      return false;\n    }\n    if (!emailRef.current.value.includes(\"@\")) {\n      alert(\"올바른 이메일을 입력해주세요!\");\n      return false;\n    }\n    if (!phoneRef.current.value.trim()) {\n      alert(\"전화번호를 입력해주세요!\");\n      return false;\n    }\n    return true;\n  };\n  useEffect(() => {\n    console.log(`수정된 횟수: ${editCount}`);\n  }, [editCount]);\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"ID: \", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"id\",\n        value: item.id,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"\\uC774\\uB984:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: updatedData.name,\n        onChange: handleChange,\n        ref: nameRef // useRef로 참조\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        value: updatedData.email,\n        onChange: handleChange,\n        ref: emailRef // useRef로 참조\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [\"Phone:\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"phone\",\n        value: updatedData.phone,\n        onChange: handleChange,\n        ref: phoneRef // useRef로 참조\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uC218\\uC815\\uB41C \\uD69F\\uC218: \", editCount]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        if (validateInputs()) {\n          onClose(); // 모달 닫기\n        }\n      },\n      children: \"\\uB2EB\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(UpdateDataForm, \"mX/g5KXT9epfnN1vBx7fyishz6M=\");\n_c = UpdateDataForm;\nexport default UpdateDataForm;\nvar _c;\n$RefreshReg$(_c, \"UpdateDataForm\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","UpdateDataForm","item","onUpdateData","onClose","_s","updatedData","setUpdatedData","name","email","phone","editCount","setEditCount","nameRef","emailRef","phoneRef","handleChange","e","value","target","prev","response","fetch","id","method","headers","body","JSON","stringify","ok","console","error","validateInputs","current","trim","alert","includes","log","children","type","readOnly","fileName","_jsxFileName","lineNumber","columnNumber","onChange","ref","onClick","_c","$RefreshReg$"],"sources":["/Users/kim-yujin/Downloads/2024_OSSWorkspace/as5-2/src/components/UpdateDataForm.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\n\nfunction UpdateDataForm({ item, onUpdateData, onClose }) {\n  const [updatedData, setUpdatedData] = useState({\n    name: item.name,\n    email: item.email,\n    phone: item.phone,\n  });\n\n  const [editCount, setEditCount] = useState(0); // 수정 횟수\n\n  const nameRef = useRef();\n  const emailRef = useRef();\n  const phoneRef = useRef();\n\n  // 값이 변경될 때 상태 업데이트 및 API 호출\n  const handleChange = async (e) => {\n    const { name, value } = e.target;\n    setUpdatedData((prev) => ({ ...prev, [name]: value }));\n    setEditCount((prev) => prev + 1); // 수정 횟수 증가\n\n    try {\n      const response = await fetch(\n        `https://6728fadd6d5fa4901b6bbadc.mockapi.io/users/${item.id}`,\n        {\n          method: \"PUT\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ ...updatedData, [name]: value }),\n        }\n      );\n      if (!response.ok) {\n        console.error(\"Error updating data\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n\n  // 유효성 검사 함수\n  const validateInputs = () => {\n    if (!nameRef.current.value.trim()) {\n      alert(\"이름을 입력해주세요!\");\n      return false;\n    }\n    if (!emailRef.current.value.includes(\"@\")) {\n      alert(\"올바른 이메일을 입력해주세요!\");\n      return false;\n    }\n    if (!phoneRef.current.value.trim()) {\n      alert(\"전화번호를 입력해주세요!\");\n      return false;\n    }\n    return true;\n  };\n\n  useEffect(() => {\n    console.log(`수정된 횟수: ${editCount}`);\n  }, [editCount]);\n\n  return (\n    <form>\n      <label>\n        ID: <input type=\"text\" name=\"id\" value={item.id} readOnly />\n      </label>\n      <br />\n      <label>\n        이름:\n        <input\n          type=\"text\"\n          name=\"name\"\n          value={updatedData.name}\n          onChange={handleChange}\n          ref={nameRef} // useRef로 참조\n        />\n      </label>\n      <br />\n      <label>\n        Email:\n        <input\n          type=\"email\"\n          name=\"email\"\n          value={updatedData.email}\n          onChange={handleChange}\n          ref={emailRef} // useRef로 참조\n        />\n      </label>\n      <br />\n      <label>\n        Phone:\n        <input\n          type=\"text\"\n          name=\"phone\"\n          value={updatedData.phone}\n          onChange={handleChange}\n          ref={phoneRef} // useRef로 참조\n        />\n      </label>\n      <br />\n      <p>수정된 횟수: {editCount}</p>\n      <button\n        type=\"button\"\n        onClick={() => {\n          if (validateInputs()) {\n            onClose(); // 모달 닫기\n          }\n        }}\n      >\n        닫기\n      </button>\n    </form>\n  );\n}\n\nexport default UpdateDataForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}